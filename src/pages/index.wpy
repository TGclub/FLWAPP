<style lang="scss" type="text/scss">
	@import "../common/styles/variables";
	.container {
		padding-top: 50rpx;
		display: flex;
		justify-content: center;
		.icon {
			width: 200rpx;
			height: 200rpx;
		}

		&-button {
			background: rgb(30, 60, 185);
			color: #ffffff;
		}
		&-button__red {
			background: $red;
			color: #ffffff;
			width: 272rpx;
		}
	}

	.title, .intro {
		display: block;
		text-align: center;
	}

	.intro {
		margin-top: 20rpx;
		margin-bottom: 600rpx; // make the button postion
		font-size: 36rpx;
		color: rgba(129,129, 129,1);
		font-family: "Arial Narrow";
		font-weight: normal;
	}

	.midBox {
		display: flex;
		justify-content: center;
		align-items: center;
		margin-top: 40rpx;
	}

	.banner{
		position: absolute;
		display: block;
		width: 100%;
		height: 840rpx;
		bottom: 160rpx;
	}

</style>

<template>
	<view class="container">
		<image src="{{logoURL}}" class="icon fadeIn animated"></image>
	</view>
	<!--<p class="title"></p>-->
	<!--<p class="intro">Connecting Mentor & Elite With Lightweight Platform.</p>-->
	<p class="intro"> —    SERVICE FOR WHALE    — </p>
	<image class="banner fadeIn animated" src="{{bannerURL}}"></image>
	<view class="midBox">
		<button open-type="getUserInfo" bindgetuserinfo="GetInfo" size="default" class="container-button animated fadeIn">开启海鲸之旅</button>
	</view>
	<view class="midBox">
		<button open-type="getUserInfo" bindgetuserinfo="clickDonate" size="default" class="container-button__red animated fadeIn">独立捐赠</button>
	</view>
</template>

<script>
	import page from './base/basicPage.wpy'
	import updator from '../common/scripts/updator'

	export default class Index extends page {
		config = {
			enablePullDownRefresh: false,
			navigationBarTitleText: '小红花'
		}

		components = {}

		onLoad () {
			let debug = false
			if (debug) {
				this.$WX.jumpTo('./user/topUp')
				return false
			}

			// 首次进入清除缓存
			this.$WX.clearStorage()
			// 检查更新
			updator()
		}

		GetInfo (res) {
			this.$WX.setStorage('wxAvatar', res.detail.rawData.avatarUrl)
			this.$WX.setStorage('wxName', res.detail.rawData.nickName)
			this.$WX.jumpTo('./home')
		}

		// 捐赠按钮点击事件
		clickDonate () {
			// 测试用数据
			// this.$WX.setStorage('donate_name', '史蒂芬周')
			this.$WX.jumpTo('./user/subDonate')
			// this.$WX.jumpTo('./test/poster')
		}

		onReady () {}
		data = {
			logoURL: '../static/images/logo.png',
			bannerURL: '../static/images/banner.png'
		}
	}
</script>
