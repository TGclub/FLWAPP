<style lang="scss" type="text/scss">
	.container {
		padding-top: 50rpx;
		display: flex;
		justify-content: center;
		.icon {
			width: 100px;
			height: 100px;
		}

		&-button {
			margin-top: -300rpx;
			background: rgb(30, 60, 185);
			color: #ffffff;
		}
	}

	.title, .intro {
		display: block;
		text-align: center;
	}

	.intro {
		margin-top: 20rpx;
		font-size: 36rpx;
		color: rgba(129,129, 129,1);
		font-family: "Arial Narrow";
		font-weight: bold;
	}

	.midBox {
		display: flex;
		justify-content: center;
		align-items: center;
		margin-top: 40rpx;
	}

	.banner{
		display: block;
		width: 100%;
		height: 840rpx;
	}

</style>

<template>
	<view class="container">
		<image src="{{logoURL}}" class="icon fadeIn animated"></image>
	</view>
	<!--<p class="title"></p>-->
	<!--<p class="intro">Connecting Mentor & Elite With Lightweight Platform.</p>-->
	<p class="intro"> —    SERVICE FOR WHALE    — </p>
	<image class="banner fadeIn animated" src="{{bannerURL}}"></image>
	<view class="midBox">
		<button open-type="getUserInfo" bindgetuserinfo="GetInfo" size="default" class="container-button animated fadeIn">开启海鲸之旅</button>
	</view>
</template>

<script>
	import page from './base/basicPage.wpy'

	export default class Index extends page {
		config = {
			enablePullDownRefresh: false,
			navigationBarTitleText: '小红花'
		}

		components = {}

		onLoad () {
			let debug = false
			if (debug) {
				// this.$WX.jumpTo('./home')
//			this.$WX.jumpTo('./account/login')
				this.$WX.jumpTo('./user/topUp')
				return false
			}

			// 首次进入清除缓存
			this.$WX.clearStorage()

//			this.$WX.wxLogin()
//				.then(res => {
//					return this.$WX.getUserInfo()
//				})
//				.then(res => {
//					this.$WX.setStorage('wxAvatar', res.userInfo.avatarUrl)
//					this.$WX.setStorage('wxName', res.userInfo.nickName)
//					this.$WX.jumpTo('./user/student')
//						this.$WX.jumpTo('./home')
//				})
		}

		GetInfo (res) {
			this.$WX.setStorage('wxAvatar', res.detail.rawData.avatarUrl)
			this.$WX.setStorage('wxName', res.detail.rawData.nickName)
			this.$WX.jumpTo('./home')
		}

		onReady () {}
		data = {
			logoURL: '../static/images/logo.png',
			bannerURL: '../static/images/banner.png'
		}
	}
</script>
